---
layout: post
title: "바인드 변수(Bind Variable)로 SQL 인젝션 막는 이유 쉽게 설명"
---

# SQL 바인드 변수(Bind Variable)가 SQL 인젝션을 막는 이유

## 한 줄 요약
**바인드 변수는 사용자 입력을 SQL 문법이 아닌 ‘값’으로만 처리하기 때문에  
SQL 인젝션 공격이 원천적으로 차단된다.**

---

## 1. SQL 인젝션은 왜 발생할까?

SQL 인젝션은 보통 사용자 입력을 **문자열로 직접 이어 붙일 때** 발생한다.

### ❌ 취약한 SQL 예시
```sql
SELECT * FROM users WHERE id = '입력값';
```

### 정상 입력
```
boyeon
```

실제 실행 SQL:
```sql
SELECT * FROM users WHERE id = 'boyeon';
```

### 공격자 입력 😈
```
' OR '1'='1
```

실제 실행 SQL:
```sql
SELECT * FROM users WHERE id = '' OR '1'='1';
```

➡️ `'1'='1'` 은 항상 참  
➡️ 조건이 무력화되며 모든 데이터가 조회됨  
➡️ 이것이 **SQL Injection**

---

## 2. 바인드 변수(Bind Variable)는 뭐가 다를까?

바인드 변수는 SQL을 **두 단계로 나누어 처리**한다.

### ① SQL 구조를 먼저 확정
```sql
SELECT * FROM users WHERE id = ?
```

이 단계에서 DB는 이렇게 인식한다.

> “WHERE id = (값 하나)”  
> “SQL 구조는 이미 고정”

### ② 나중에 값만 전달
```text
? = ' OR '1'='1
```

DB는 이 입력을 다음처럼 처리한다.

```sql
WHERE id = "' OR '1'='1"
```

- `OR`, `=` 는 SQL 문법 ❌  
- 단순한 **문자열 데이터** ⭕  
- SQL 구조 변경 불가

---

## 3. 문자열 연결 vs 바인드 변수 차이

| 방식 | DB가 사용자 입력을 해석하는 방식 |
|----|----------------------------|
| 문자열 이어붙이기 | SQL 코드의 일부 |
| 바인드 변수 | 순수한 데이터 값 |

---

## 4. 비유로 이해하기 🍔

### ❌ 바인드 변수를 사용하지 않은 경우
> 손님이 **주방 명령서를 직접 작성**하는 상황

손님:
> “햄버거 하나 주세요.  
> 그리고 주방 문 열고 전부 가져가세요.”

주방:
> “명령이네? 실행!”

### ✅ 바인드 변수를 사용한 경우
> 주방 명령서는 **고정**, 손님은 옵션만 선택

주방:
> “주문 형식은 이미 정해져 있습니다.  
> 값만 주세요.”

손님이 이상한 입력을 해도  
➡️ 그냥 옵션 이름일 뿐, 실행되지 않음

---

## 5. 결론

- 바인드 변수는  
  - SQL **구조**
  - 사용자 **입력 값**
  을 완전히 분리한다
- DB는 입력값을 **절대 SQL 문법으로 해석하지 않는다**
- 결과적으로 **SQL 인젝션 공격이 원천 차단된다**

---

## 참고 키워드
- PreparedStatement (Java)
- Parameterized Query (Python, Node.js)
- 쿼리 캐시 재사용으로 성능 이점
